<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/src/styles/index.css">
    <title>Скролл-Анимации</title>
  </head>
  <body>
    <section class="sectionPin">
      <div class="pin-wrap-sticky">
        <div class="pin-wrap">
          <div class="q"></div>
          <div class="content">
            <h1 class="text">Scroll-driven Animations</h1>
            <p class="text-i">created by <br/> Slesarev Nikita</p>
            <p class="text-i"><br/>Kislov Andrey</p>
          </div>       
        </div>
      </div>
    </section>
    <section class="sectiontwo">
      <div class="title">
          <h1 class="text-two"><span>Horizontal
            scroll
            section</span><br/>Технология и использование анимации</h1>
          <p class="paragraf">Анимация в веб-разработке — это мощный инструмент, который позволяет создавать динамичные и интерактивные пользовательские интерфейсы. Она не только улучшает визуальное восприятие сайта, но и помогает эффективно передавать информацию и направлять внимание пользователя.</p>
          <h1 class="text-two">Технология и использование анимации</h1>
          <h2 class="text-two">Создание скролл анимации</h2>
          <p class="paragraf">Код который я вам покажу описывает секцию на веб-странице с горизонтальной анимацией при скроллинге, используя CSS анимации и свойства, связанные с таймлайном просмотра. Давайте разберем его шаг за шагом.</p>
          <p class="paragraf">Первое что хочу показать, это базовую разметку Html</p>
          <img src="/src/img/scroll/code11.jpg" alt="">
          <h2 class="text-two">CSS Анимация</h2>
          <img src="/src/img/scroll/code2.jpg" alt="">
          <p class="paragraf">Здесь создается анимация с именем move, которая перемещает элемент по горизонтали так, что его правый край выравнивается с правым краем вьюпорта (окна просмотра).</p>
          <h2 class="text-two">Стили для <span>#sectionPin</span></h2>
          <img src="/src/img/scroll/code3.jpg" alt="">
          <ul class="ul">
            <li class="li"><span>height: 500vh:</span>  Устанавливает высоту секции равной 500 высотам вьюпорта.Это создает достаточно места для вертикального скроллинга.</li>
            <li class="li"><span>overflow: visible:</span> Делает так, чтобы содержимое, выходящее за границы элемента, было видно, что нужно для работы position: sticky.</li>
            <li class="li"><span>view-timeline-name: --section-pin-tl:</span> Определяет имя таймлайна просмотра, который будет использован для синхронизации анимации с скроллингом.</li>
            <li class="li"><span>view-timeline-axis: block:</span> Указывает, что таймлайн будет синхронизирован по блочной оси (вертикально).</li>
          </ul>
          <h2 class="text-two">Стили для <span>.pin-wrap-sticky</span></h2>
          <img src="/src/img/scroll/code4.jpg" alt="">
          <ul class="ul">
            <li class="li"><span>height: 100vh и width: 100vw:</span> Устанавливают размеры равными высоте и ширине вьюпорта.</li>
            <li class="li"><span>position: sticky: </span>Делает элемент липким, так что он остается закрепленным в верхней части вьюпорта при скроллинге.</li>
            <li class="li"><span>top: 0:</span> Закрепляет элемент на верхней границе вьюпорта.</li>
            <li class="li"><span>overflow-x: hidden:</span> Прячет содержимое, выходящее за границы по горизонтали.</li>
          </ul>
          <h2 class="text-two">Стили для <span>.pin-wrap</span></h2>
          <img src="/src/img/scroll/code5.jpg" alt="">
          <ul class="ul">
            <li class="li"><span>height: 100vh и width: 250vmax:</span> Устанавливают высоту равной высоте вьюпорта и ширину, значительно превышающую ширину вьюпорта (250 раз).</li>
            <li class="li"><span>will-change: transform:</span> Указывает браузеру, что в будущем у этого элемента будет изменяться свойство transform, оптимизируя производительность.</li>
            <li class="li"><span>animation: linear move forwards:</span> Применяет анимацию move с линейной скоростью и делает так, чтобы она воспроизводилась один раз до конца.</li>
            <li class="li"><span>animation-timeline: --section-pin-tl:</span> Привязывает анимацию к таймлайну просмотра.</li>
            <li class="li"><span>animation-range: contain 0% contain 100%:</span> Определяет диапазон таймлайна просмотра, в котором будет воспроизводиться анимация, от 0% до 100%.</li>
          </ul>
          <h2 class="text-two">Подведем итоги</h2>
          <ol class="ul">
            <li class="li">Создание анимации: Сначала создается анимация <span>move</span>, которая перемещает элемент по горизонтали.</li>
            <li class="li">Настройка секции: <span>#sectionPin</span> получает большую высоту (500vh) для создания пространства для вертикального скроллинга. Настраивается таймлайн просмотра.</li>
            <li class="li">Настройка липкого контейнера: <span>.pin-wrap-sticky</span> становится липким, оставаясь на месте при скроллинге.</li>
            <li class="li">Настройка анимации содержимого: <span>.pin-wrap</span> растягивается по горизонтали и анимация привязывается к таймлайну просмотра, синхронизируясь с вертикальным скроллингом.</li>
          </ol>
          <p class="paragraf">Таким образом, при скроллинге страницы элемент <span>.pin-wrap</span> будет анимировано перемещаться по горизонтали, создавая эффект горизонтальной прокрутки внутри вертикально прокручиваемой секции.</p>
          <h1 class="text-two">И покажу как это выглядит</h1>
      </div>
    </section>
    <section class="test">
      <div class="sticky-pin">
        <div class="wrap-pin">
          <div class="q"></div>
          <div class="container">
            <img class="pin" src="https://img.freepik.com/free-photo/beautiful-mountain-forest-landscape_23-2149063036.jpg?size=626&ext=jpg" alt="">
            <img class="pin" src="https://img.freepik.com/free-photo/mountainous-nature-landscape-with-river_23-2150705792.jpg?size=626&ext=jpg" alt="">
            <img class="pin" src="https://img.freepik.com/free-photo/assortment-of-colored-plant-leaves_23-2149337900.jpg?size=626&ext=jpg" alt="">
            <img class="pin" src="https://img.freepik.com/free-photo/beautiful-palm-tree-in-vivid-colors_23-2151591807.jpg?size=626&ext=jpg" alt="">
            <img class="pin" src="https://img.freepik.com/premium-photo/guy-on-the-edge-of-the-prelude-to-preikestolen-norway_7509-960.jpg?size=626&ext=jpg&ga=GA1.1.1818441046.1720137018&semt=ais_user" alt="">
          </div>
         
        </div>
      </div>
    </section>

    <section class="sectiontwo">
        <div class="title">
          <h1 class="text-two"><span>Carousel with markers</span><br/>Технология и использование анимации</h1>
          <h2 class="text-two">Создание карусель анимации</h2>
          <p class="paragraf">Этот код который я вам покажу описывает карусель изображений, где элементы списка .entries скроллируются горизонтально, а маркеры .markers a синхронизированы с этой прокруткой. Давайте разберем его шаг за шагом.</p>
          <img class="img" src="/src/img/carusel/code1.png" alt="">
          <p class="paragraf">Это относительно базовая разметка для карусели, в которой есть контейнер <span>div</span>, в нем лежит два списка <span>.entries</span> и <span>.markers</span></p>
          <h2 style="font-size: clamp(3vw, 3vw, 10vw);" class="text-two">Стили для <span>[data-component="carousel"]</span></h2>
          <img class="img" src="/src/img/carusel/code2.png" alt="">
          <ol class="ul">
            <li class="li"><span>.entries { scroll-timeline: --carousel x; }:</span> Определяет таймлайн прокрутки с именем <span>--carousel</span> и синхронизирует его с горизонтальной осью прокрутки (x).</li>
            <li class="li"><span>.markers a { animation-timeline: --carousel; }:</span> Привязывает анимации маркеров к таймлайну<span>--carousel.</span></li>
          </ol>
          <h2 class="text-two">Стили для таймлайна</h2>
          <img class="img" src="/src/img/carusel/code3.png" alt="">
          <ol class="ul">
            <li class="li"><span>timeline-scope: --carousel;:</span> Определяет область действия таймлайна <span>--carousel.</span></li>
          </ol>
          <h2 class="text-two">Стили для маркеров</h2>
          <img class="img" src="/src/img/carusel/code4.png" alt="">
          <ol class="ul">
            <li class="li"><span>animation-range: calc((var(--i) - 1) * 20%) calc(var(--i) * 20% + 1px);:</span> Определяет диапазон анимации для каждого маркера, основанный на CSS-переменной --i.</li>
          </ol>
          <h2 class="text-two">Шаги выполнения</h2>
          <ol class="ul">
            <li class="li">Определение HTML структуры: <br/><span>div</span> с атрибутом <span>data-component="carousel"</span> содержит два списка: <span>.entries</span> для элементов карусели и <span>markers</span>. для маркеров.<br/></li>
            
            <li class="li">Стили для контейнера карусели:
              <hr> 
              <br/>Внутри контейнера карусели <span>[data-component="carousel"]</span> определяются стили для <span>.entries и .markers a.</span><br/> 
              <hr>
              <span>.entries</span> получает таймлайн прокрутки <span>--carousel</span>, синхронизированный с горизонтальной осью прокрутки.<br/>
              <hr>
              <span>.markers a</span> привязывают свои анимации к этому таймлайну.
            </li>
            <li class="li">Определение области действия таймлайна:

              <span>timeline-scope: --carousel;</span> задает область действия таймлайна <span>--carousel</span> для контейнера карусели.</li>
            <li class="li">Настройка анимации для маркеров:<hr>
              <br/>

              <span>animation-range: calc((var(--i) - 1) * 20%) calc(var(--i) * 20% + 1px);</span> устанавливает диапазон анимации для каждого маркера, где <span>var(--i)</span> - это индекс маркера.<br/>
              <hr>
              Диапазон анимации каждого маркера зависит от его позиции. Например, если --i равен 1, анимация будет активироваться на первых 20% прокрутки, если --i равен 2, то на вторых 20%, и так далее.</li>
          </ol>
          <h2 class="text-two">Подведем итоги</h2>
          <p class="paragraf">Этот код создает карусель изображений с маркерами, которые синхронизированы с горизонтальной прокруткой списка <span>.entries</span>. Таймлайн прокрутки <span>--carousel</span> управляет анимацией маркеров, показывая соответствующий маркер в зависимости от положения прокрутки карусели.</p>
          <h2 class="text-two">Перейдем к демо</h2>  
      </div>
    </section>
    <section class="cont">
      <div data-component="carousel">
        <ul class="entries" tabindex="0">
          <li class=l><a name="carousel_01"><img class="slide" src="https://img.freepik.com/premium-photo/scenic-view-of-rocks-in-sea-against-clear-sky_1048944-19066138.jpg?size=626&ext=jpg&ga=GA1.1.1143220769.1720183557&semt=ais_user" alt="" draggable="false"></a></li>
          <li class=l><a name="carousel_02"><img class="slide" src="https://img.freepik.com/premium-photo/cluster-of-purple-and-blue-leaves_118124-302144.jpg?size=626&ext=jpg&ga=GA1.1.1143220769.1720183557&semt=ais_user" alt="" draggable="false"></a></li>
          <li class=l><a name="carousel_03"><img class="slide" src="https://img.freepik.com/free-photo/beautiful-scenery-of-green-trees-near-the-body-of-water-over-high-mountains_181624-18193.jpg?size=626&ext=jpg&ga=GA1.1.1143220769.1720183557&semt=ais_user" alt="" draggable="false"></a></li>
          <li class=l><a name="carousel_04"><img class="slide" src="https://img.freepik.com/free-photo/mountainous-nature-landscape-with-river_23-2150705796.jpg?size=626&ext=jpg&ga=GA1.1.1143220769.1720183557&semt=ais_user" alt="" draggable="false"></a></li>
        </ul>
        <ul class="markers">
          <li class="Li"><a href="#carousel_01"></a></li>
          <li  class="Li"><a href="#carousel_02"></a></li>
          <li  class="Li"><a href="#carousel_03"></a></li>
          <li class="Li"><a href="#carousel_04"></a></li>
        </ul>
      </div>
    </section>
		<section class="reveal">
			<div class="title center">
				<h1 class="text-two"><span>Reveal Image</span><br/>Технология и использование анимации</h1>
				<p class="paragraf">Мы создаем новую временную шкалу процесса прокрутки (view).</p>
				<p class="paragraf">Далее определяем анимацию. У нас она будет линейной, указываем название анимации reveal, а после указываем both</p>
				<p class="paragraf">Далее определяем свойство animation-timeline для указания созданной оси.</p>
				<p class="paragraf">И в конце определяем animation-range, чтобы указать с какого момента анимация должна начаться и в какой закончится. Начинается она, как только появляется у нас на экране и заканчивается, когда будет в центре экрана.</p>
				<p class="paragraf">Анимация reveal просто изменяет прозрачность с 0 до 1 и немного меняет позицию снизу вверх.

					Эта анимация очень похожа на ту, которая используется на нашем сайте и для нее мы сейчас загружаем отдельную библиотеку.
				</p>
				<h2 class="text-two">Создание карусель анимации</h2>
				<h2 class="text-two">Перейдем к демо</h2>  
		</div>
			<img class="image revealing-image" src="./src/img/reveal/1.jpg" alt="anime girl">
			<img class="image revealing-image" src="./src/img/reveal/2.jpg" alt="anime girl">
		</section>
		<section class="reveal">
			<div class="title center">
				<h1 class="text-two"><span>Parallax carousel</span><br/>Технология и использование анимации</h1>
				<p class="paragraf">Чтобы создать временную шкалу просмотра прогресса, для свойства animation-timeline укажем значение view(x) чтобы отслеживать прогресс по оси x. </p>
				<p class="paragraf">В этой анимации мы будем анимировать свойство object-position, которое позволит нам спозиционировать изображение внутри своего контейнера. Поэтому изначально мы сдвигаем его максимально вправо, указывая 100% и далее по мере прокрутки оно будет сдвигаться к левой границе. Что и создаст такой эффект.</p>
				<h2 class="text-two">Перейдем к демо</h2>  
		</div>
		<ul class="slides">
			<li class="slide" ><img src="./src/img/parallax/1.jpg" alt="1"></li>
			<li class="slide" ><img src="./src/img/parallax/2.jpg" alt="1"></li>
			<li class="slide" ><img src="./src/img/parallax/3.jpg" alt="1"></li>
			<li class="slide" ><img src="./src/img/parallax/4.jpg" alt="1"></li>
			<li class="slide" ><img src="./src/img/parallax/5.jpg" alt="1"></li>
		</ul>
		</section>
		<section class="reveal">
			<div class="title center">
				<h1 class="text-two"><span>Polyfill</span></h1>
				<img class="img image-center" src="/src/img/polyfill/1.png" alt="">
				<p class="paragraf">К сожалению у этого способа создания анимаций есть и минусы. Так в Firefox нужно отдельно включать эту функцию в настройках в css. Но в safari эти свойства не поддерживаются. К счастью, есть полифил, который может решить проблему поддержки в сафари, но и у него есть свои ограничения. К сожалению документации к нему нет, так что обо всех проблемах можно узнать только в работе над проектами или в проблемах на gitHub.</p>
				<h2 class="text-two">Как работает?</h2>
				<p class="paragraf">Подключение происходит с помощью подключения js скрипта к своей странице. Его можно скачать или подключить по ссылке.</p>
				<img class="img image-center" src="/src/img/polyfill/2.png" alt="">
				<p class="paragraf">Все свойства анимации связанные с "animation-timeline" парсятся из css и переопределяются с помощью js в соответствии со стандартом описанном в спецификации при разработке этих свойств
					https://drafts.csswg.org/scroll-animations-1/
					</p>
				<h2 class="text-two">Ограничения</h2>
				<p class="paragraf">Некоторые свойства не обрабатываются этим полифилом. Об одном из них я узнал только из “Проблем” на Github. Так как никакой документации к нему нет.</p>
				<p class="paragraf">Проблема с подключением css файлов по ссылкам асинхронно. Так как полифил получает css из нашего html файла. И если он загрузится до загрузки css загружаемых асинхронно, то он не сможет их спарсить.</p>
				<p class="paragraf">Проблема с подключением этого полифилла асинхронно. Так как изначально у нас существует временная шкала документа, которая обычно и используется при анимациях, то при загрузке документа эти анимации сразу начинают выполнятся. А полифилл работает таким образом, что он ловит анимации перед тем, как они исполнятся. И не успевая загрузиться все анимации уже “сыграли” и он не может их обработать.</p>
				<img class="img image-center" src="/src/img/polyfill/3.png" alt="">
				<h2 class="text-two">Попытки решения проблемы с асинхронной загрузкой</h2>  
				<p class="paragraf">На gitHub в обсуждении предлагали вариант решения проблемы с асинхронной загрузкой. Нам нужно получать наши анимации на странице и после загрузки скрипта заново их запускать. Тогда после перезапуска анимаций после инициализации полифилла они должны работать как и ожидается. У меня не получилось это реализовать при моих экспериментах.</p>
				<h2 class="text-two">Итог</h2>
				<p class="paragraf">Но кроме этих проблем полифил отлично работает и позволяет использовать новые скролл анимации во всех браузерах.</p>
		</div>
		</section>
    <h2 style="margin-top: 10vw;" class="text-two">Спасибо за внимание</h2>  
  </body>
</html>
